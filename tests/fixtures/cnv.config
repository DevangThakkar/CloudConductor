[split_sample]
  module = SampleSplitter
  submodule = SampleSplitter


[collect_read_counts]
  module = GATK
  submodule = CollectReadCounts
  docker_image = gatk4
  input_from = split_sample
  final_output = read_count_out
  [[args]]
    gatk_version = 4
    ref = ref
    ref_dict = ref_dict
    ref_idx = ref_idx

[denoise_read_counts]
  module = GATK
  submodule = DenoiseReadCounts
  docker_image = gatk4
  input_from = collect_read_counts
  final_output = std_copy_ratio, denoise_copy_ratio
  [[args]]
    gatk_version = 4

[plot_denoise_cr]
  module = GATK
  submodule = PlotDenoisedCopyRatios
  docker_image = gatk4
  input_from = denoise_read_counts
  final_output = denoised_plot, denoised_plot_lm4, std_mad, denoised_mad, delta_mad, scale_delta_mad
  [[args]]
    gatk_version = 4
    ref_dict = ref_dict

[model_segments]
  module = GATK
  submodule = ModelSegments
  docker_image = gatk4
  input_from = denoise_read_counts
  final_output = model_begin_seg, model_final_seg, cr_seg, model_begin_af_param, model_begin_cr_param, model_final_af_param, model_final_cr_param
  [[args]]
    gatk_version = 4

[call_crs]
  module = GATK
  submodule = CallCopyRatioSegments
  docker_image = gatk4
  input_from = model_segments
  final_output = seg_call
  [[args]]
    gatk_version = 4

[plot_call_crs]
  module = GATK
  submodule = PlotModeledSegments
  docker_image = gatk4
  input_from = call_crs
  final_output = model_plot
  [[args]]
    gatk_version = 4
    ref_dict = ref_dict